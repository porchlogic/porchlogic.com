<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>Porch Logic – Checkout</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="./shop.css" />
</head>

<body>
    <header class="shop-header">
        <a href="/" class="logo-link">Porch Logic</a>
        <nav class="shop-nav">
            <a href="./index.html" class="nav-link">Shop</a>
            <a href="./cart.html" class="cart-link">
                <span>Cart</span>
                <span class="cart-count">0</span>
            </a>
        </nav>
    </header>

    <main class="shop-main cart-main">
        <h1>Checkout</h1>

        <section class="cart-layout">
            <div class="checkout-panel card">
                <h2>Payment</h2>
                <p class="small-note">
                    All payments handled by Stripe. We don’t see your card details.
                </p>

                <form id="payment-form">
                    <div class="form-section">
                        <label for="email">Email</label>
                        <input id="email" type="email" autocomplete="email" required />
                        <div id="email-errors" class="field-error"></div>
                    </div>

                    <div class="form-section">
                        <label>
                            <input type="checkbox" id="subscribe-checkbox" />
                            <span>Keep me in the loop about future Porch Logic experiments.</span>
                        </label>
                    </div>

                    <div class="form-section">
                        <label>Shipping address</label>
                        <div id="shipping-address-element" class="stripe-element"></div>
                    </div>

                    <div class="form-section">
                        <label>Payment</label>
                        <div id="payment-element" class="stripe-element"></div>
                    </div>

                    <div id="payment-message" class="payment-message hidden"></div>

                    <button id="submit" class="button button-primary" type="submit">
                        <span id="spinner" class="spinner hidden"></span>
                        <span id="button-text">Pay</span>
                    </button>
                </form>

                <p class="small-note">
                    After payment, you’ll be redirected back to Porch Logic to confirm everything
                    worked.
                </p>
            </div>
        </section>
    </main>

    <footer class="shop-footer">
        <p>Porch Logic &copy; <span id="year"></span></p>
    </footer>

    <!-- Stripe.js v3 – Basil or newer -->
    <script src="https://js.stripe.com/basil/stripe.js"></script>

    <!-- Cart functions (getCartItems, etc.) -->
    <script src="./cart.js"></script>

    <!-- Your existing checkout logic, unchanged -->
    <script src="./checkout.js"></script>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const y = document.getElementById("year");
            if (y) y.textContent = new Date().getFullYear();
        });
    </script>
</body>

</html>