<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>Porch Logic â€“ Cart</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="color-scheme" content="light dark" />
    <link rel="stylesheet" href="../css/pico.css" />
    <link rel="stylesheet" href="../css/shop.css" />
    <style>
        .hidden {
            display: none !important;
        }

        .spinner {
            border: 0.125rem solid transparent;
            border-top-color: currentColor;
            border-right-color: currentColor;
            border-radius: 999px;
            width: 1rem;
            height: 1rem;
            display: inline-block;
            vertical-align: middle;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }
    </style>
</head>

<body>
    <header class="container">
        <nav>
            <ul>
                <li>
                    <a href="/" class="contrast"><strong>Porch Logic</strong></a>
                </li>
                <li><a href="./index.html">Shop</a></li>
            </ul>
            <ul>
                <li>
                    <a href="./cart.html">
                        Cart <span class="cart-count" aria-live="polite">0</span>
                    </a>
                </li>
            </ul>
        </nav>
    </header>

    <main class="container">
        <header>
            <p class="secondary">Cart</p>
            <h1>Your cart</h1>
        </header>

        <section class="items full-width">
            <article>
                <header>
                    <h2>Items</h2>
                </header>
                <div id="cart-items-container"></div>
            </article>
        </section>

        <section class="summary full-width">
            <article>
                <header>
                    <h2>Summary</h2>
                </header>
                <p class="secondary">Items total</p>
                <p><strong id="cart-total">$0.00</strong></p>
                <footer>
                    <button id="go-to-checkout" type="button">Checkout</button>
                    <a href="./index.html">Continue shopping</a>
                </footer>
            </article>
        </section>

        <!-- Full-screen glyph editor modal -->
        <div id="glyph-modal" class="glyph-modal hidden">
            <div class="glyph-modal-inner card">
                <header class="glyph-modal-header">
                    <h2>Custom AM8 Glyph</h2>
                    
                </header>
                <p class="glyph-modal-subtitle">
                    Sculpt your glyph by clicking and dragging. Right-click to flatten segments.
                </p>
                <div id="glyph-modal-editor" class="glyph-modal-editor"></div>
                <button type="button" class="button glyph-modal-close" aria-label="Close glyph editor">
                    Close
                </button>
            </div>
        </div>
    </main>

    <footer class="container">
        <small>Porch Logic &copy; <span id="year"></span></small>
    </footer>

    <!-- No Stripe here anymore -->
    <script src="./cart.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const y = document.getElementById("year");
            if (y) y.textContent = new Date().getFullYear();

            const checkoutBtn = document.getElementById("go-to-checkout");
            if (checkoutBtn) {
                checkoutBtn.addEventListener("click", () => {
                    // Only navigate if there are items
                    const cartItems = getCartItems();
                    if (!cartItems || cartItems.length === 0) return;
                    window.location.href = "./checkout.html";
                });
            }
        });
    </script>
</body>

</html>