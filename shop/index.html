<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>Porch Logic â€“ Shop</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="color-scheme" content="light dark" />
    <link rel="stylesheet" href="../css/pico.css" />
    <link rel="stylesheet" href="../css/shop.css" />
</head>

<body>
    <header class="container">
        <nav>
            <ul>
                <li>
                    <a href="/" class="contrast" aria-label="Porch Logic home">
                        <strong>Porch Logic</strong>
                    </a>
                </li>
            </ul>
            <ul>
                <li><a href="./cart.html">Cart</a></li>
            </ul>
        </nav>
    </header>

    <main class="container">
        <section aria-labelledby="shop-title">
            <header>
                <h1 id="shop-title">Shop</h1>
                <p></p>
            </header>

            <section class="grid">
                <article class="product-card product-card--m8plate">
                    <img class="product-card__image" src="/images/M8-Plate-1.png" alt="M8 Plate" />
                
                    <header>
                        <h2>M8 Plate</h2>
                        <p class="secondary">for Dirtywave M8 Tracker model:01</p>
                    </header>              
                    
                
                    <footer>
                        <p class="product-card_price">$32</p>
                        <button class="outline" id="buy-m8-plate-1">Buy</button>
                    </footer>
                </article>
                
                <article class="product-card product-card--smb1">
                    <img class="product-card__image" src="/images/smb1_hero6.png" alt="M8 Plate" />
                
                    <header>
                        <h2>SMB1</h2>
                        <p class="secondary">connect your midi gear to</p>
                    </header>
     
                
                    <footer>
                        <p class="product-card_price">$42</p>
                        <button class="outline" id="buy-m8-plate-1">Buy</button>
                    </footer>
                </article>

            </section>

            
            
            
        </section>
    </main>

    <dialog id="cart-popup" aria-labelledby="cart-popup-title">
        <article>
            <header>
                <h2 id="cart-popup-title">Cart updated</h2>
            </header>
            <p id="popup-message"></p>
            <footer>
                <button type="button" class="secondary" data-close-cart>
                    Keep browsing
                </button>
                <a href="./cart.html" role="button">Go to cart</a>
            </footer>
        </article>
    </dialog>

    <footer class="container">
        <small>Porch Logic &copy; <span id="year"></span></small>
    </footer>

    <script src="./cart.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            // Footer year
            const y = document.getElementById("year");
            if (y) y.textContent = new Date().getFullYear();

            // M8 Plate buy button
            const buyBtn = document.getElementById("buy-m8-plate-1");
            if (buyBtn) {
                buyBtn.addEventListener("click", () => {
                    const item = {
                        id: "m8_plate_1",       // MUST match PRICE_LOOKUP on the server
                        name: "M8 Plate",
                        price: 32.0,
                        quantity: 1
                    };
                    addItemToCart(item);
                    showCartPopup(`${item.name} added to cart.`);
                });
            }

            const cartPopup = document.getElementById("cart-popup");
            const closeCartBtn = document.querySelector("[data-close-cart]");
            if (cartPopup && closeCartBtn) {
                closeCartBtn.addEventListener("click", hideCartPopup);
                cartPopup.addEventListener("cancel", (event) => {
                    event.preventDefault();
                    hideCartPopup();
                });
            }
        });
    </script>
</body>

</html>
