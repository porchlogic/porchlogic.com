<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>Porch Logic – Shop</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="./shop.css" />
</head>

<body>
    <header class="shop-header">
        <a href="/" class="logo-link">Porch Logic</a>
        <nav class="shop-nav">
            <a href="./cart.html" class="cart-link">
                <span>Cart</span>
                <span class="cart-count">0</span>
            </a>
        </nav>
    </header>

    <main class="shop-main">
        <section class="hero">
            <h1>Porch Logic Shop</h1>
            <p>A minimal little storefront for things we’re building and iterating on.</p>
        </section>

        <section class="product-grid">
            <article class="card card-product">
                <header class="card-header">
                    <h2>M8 Plate</h2>
                    <p class="price">$32</p>
                </header>
                <div class="card-body">
                    <p>
                        PETG transparent smoke single-continuous-path 3D printed faceplate for Dirtywave M8 model 01
                    </p>
                    <ul class="feature-list">
                        <li>Includes one future upgrade at 50% off</li>
                    </ul>
                </div>
                <footer class="card-footer">
                    <button id="buy-m8-plate-1" class="button button-product">
                        Add to cart
                    </button>
                </footer>
            </article>

            <article class="card card-product coming-soon">
                <header class="card-header">
                    <h2>SMB1 Beta</h2>
                    <p class="price">Coming soon</p>
                </header>
                <div class="card-body">
                    <p>Experimental MIDI sync hardware for group performances and weird projects.</p>
                    <p class="small-note">Not available yet – watch this space.</p>
                </div>
                <footer class="card-footer">
                    <button class="button button-product" disabled>
                        Coming soon
                    </button>
                </footer>
            </article>
        </section>
    </main>

    <div id="cart-popup" class="cart-popup">
        <div class="cart-popup-inner card">
            <p id="popup-message"></p>
            <div class="cart-popup-actions">
                <button class="button" onclick="hideCartPopup()">Keep browsing</button>
                <a href="./cart.html" class="button button-primary">Go to cart</a>
            </div>
        </div>
    </div>

    <footer class="shop-footer">
        <p>Porch Logic &copy; <span id="year"></span></p>
    </footer>

    <script src="./cart.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            // Footer year
            const y = document.getElementById("year");
            if (y) y.textContent = new Date().getFullYear();

            // M8 Plate buy button
            const buyBtn = document.getElementById("buy-m8-plate-1");
            if (buyBtn) {
                buyBtn.addEventListener("click", () => {
                    const item = {
                        id: "m8_plate_1",       // MUST match PRICE_LOOKUP on the server
                        name: "M8 Plate",
                        price: 32.0,
                        quantity: 1
                    };
                    addItemToCart(item);
                    showCartPopup(`${item.name} added to cart.`);
                });
            }
        });
    </script>
</body>

</html>